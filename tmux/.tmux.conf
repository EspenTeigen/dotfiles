set -g prefix C-a
unbind C-b
bind C-a send-prefix
unbind r
bind r source-file ~/.tmux.conf

set -g mouse on
set-window-option -g mode-keys vi

# Vi-mode copy bindings
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "wl-copy"
bind-key -T copy-mode-vi C-v send-keys -X rectangle-toggle

unbind '"'
unbind %
bind - split-window -v
bind | split-window -h
bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R
bind q confirm-before -p "kill-pane #P? (y/n)" kill-pane
bind s display-panes
bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5

# Modern color scheme
set -g default-terminal "tmux-256color"
set -ag terminal-overrides ",xterm-256color:RGB"

# Status bar colors and styling
set -g status-bg '#2d3748'
set -g status-fg '#e2e8f0'
set -g status-left-length 40
set -g status-right-length 80

# Window status styling
set -g window-status-current-style 'fg=#1a202c,bg=#4299e1,bold'
set -g window-status-style 'fg=#a0aec0,bg=#4a5568'
set -g window-status-separator ' '

# Pane border colors (local vs SSH)
set -g pane-border-style 'fg=#4a5568'
set -g pane-active-border-style '#{?#{m:*ssh*,#{pane_current_command}},fg=#ed8936,#{?#{||:#{==:#{SSH_CLIENT},},#{==:#{SSH_TTY},}},fg=#4299e1,fg=#ed8936}}'

# Message styling
set -g message-style 'fg=#1a202c,bg=#48bb78'
set -g message-command-style 'fg=#1a202c,bg=#ed8936'

# Status bar content
set -g status-left '#[fg=#1a202c,bg=#4299e1,bold] #{session_name} #[fg=#4299e1,bg=#2d3748]'
set -g status-right '#[fg=#a0aec0]#{continuum_status} #[fg=#4a5568]â”‚ #[fg=#e2e8f0]%H:%M #[fg=#4a5568]â”‚ #[fg=#68d391]%d %b'

# Window status format
set -g window-status-current-format '#[fg=#2d3748,bg=#4299e1]#[fg=#1a202c,bg=#4299e1,bold] #I:#W#{?window_zoomed_flag, ğŸ”,} #[fg=#4299e1,bg=#2d3748]'
set -g window-status-format '#[fg=#a0aec0,bg=#4a5568] #I:#W '

# Plugins
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Session persistence configuration
set -g @continuum-restore 'on'
set -g @continuum-save-interval '15'
set -g @resurrect-strategy-nvim 'session'
set -g @resurrect-strategy-vim 'session'
set -g @resurrect-capture-pane-contents 'on'

# Easy pane renaming
bind-key , command-prompt -p "rename pane:" "select-pane -T '%%'"

# Mark pane and swap with marked pane
bind-key m select-pane -m
bind-key M swap-pane \; select-pane -M

# Move panes with Shift+hjkl (like sway window movement)
bind-key H swap-pane -U
bind-key J swap-pane -D
bind-key K swap-pane -U
bind-key L swap-pane -D

# Enhanced pane titles and borders with SSH indicator
set -g pane-border-status top
set -g pane-border-format "#[fg=#{?#{m:*ssh*,#{pane_current_command}},#ed8936,#4299e1},bg=#2d3748] #{?pane_active,#[bold],}#{?#{m:*ssh*,#{pane_current_command}}, ğŸŒ , ğŸ  }#P: #{pane_title} #{?pane_active,#[nobold],} "

# TPM init at bottom
run '~/.tmux/plugins/tpm/tpm'

